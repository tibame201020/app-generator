---
title: "ðŸ­ Factory Workflow Blueprint"
subtitle: "The Literate State Machine of Software Production"
format:
  html:
    toc: true
    mermaid:
      theme: forest
---

# ðŸ­ Autonomous Software Factory Workflow

> \[!NOTE\] This is an **Executable Document**. It not only describes the workflow but also serves as the real-time monitoring interface for the factory.

## ðŸ—ï¸ Core Architecture: Decoupling & Orchestration

The factory is composed of five specialized autonomous components orchestrated by a central brain.

```{dot}
digraph G {
    fontname="Helvetica,Arial,sans-serif"
    node [fontname="Helvetica,Arial,sans-serif", shape=box, style=filled, fillcolor="#f9f9f9", color="#333333"]
    edge [fontname="Helvetica,Arial,sans-serif", color="#666666"]
    
    label="ðŸ­ Autonomous Software Factory Workflow"
    labelloc="t"
    fontsize=20

    User [shape=circle, label="ðŸ‘©â€ðŸ’» Human", fillcolor="#e1f5fe"]
    
    subgraph cluster_0 {
        label = "Phase 1: Discovery";
        color = "#e8f5e9";
        style = filled;
        fillcolor = "#f1f8e9";
        
        Orchestrator [label="ðŸ Factory Orchestrator", fillcolor="#fff9c4"]
        ReqAnalyst [label="ðŸ“ Requirements Analyst"]
        VisualDesigner [label="ðŸŽ¨ Visual Designer", style=dashed]
        
        Decision_UI [shape=diamond, label="Needs UI?", fillcolor="#ffffff"]
    }
    
    subgraph cluster_1 {
        label = "Phase 2: Technical Design";
        color = "#fff3e0";
        style = filled;
        fillcolor = "#fff8e1";
        
        Architect [label="ðŸ›ï¸ Architect Reviewer"]
        Simulation [label="ðŸ§  Mental Simulation", shape=ellipse]
    }
    
    subgraph cluster_2 {
        label = "Phase 3: Execution";
        color = "#f3e5f5";
        style = filled;
        fillcolor = "#f3e5f5";
        
        Iterator [label="ðŸ­ Factory Iterator"]
        Tracker [label="ðŸ—„ï¸ tracker.json", shape=note]
        Workers [label="ðŸ‘· Worker Agents"]
    }

    subgraph cluster_3 {
        label = "Phase 4: Validation";
        color = "#ffebee";
        style = filled;
        fillcolor = "#fffde7";

        CI [label="ðŸ¤– CI Checker\n(Gatekeeper)", shape=diamond]
        Repair [label="ðŸ©¹ Self-Healing", fillcolor="#ffccbc"]
        Merge [label="âœ… Merge & Advance", fillcolor="#c8e6c9"]
    }

    // Connections
    User -> Orchestrator
    Orchestrator -> ReqAnalyst
    ReqAnalyst -> Decision_UI
    
    Decision_UI -> VisualDesigner [label="Yes"]
    Decision_UI -> Architect [label="No"]
    
    VisualDesigner -> Architect
    Architect -> Simulation
    Simulation -> Iterator
    
    Iterator -> Tracker
    Tracker -> Workers
    
    Workers -> CI [label="PR"]
    
    CI -> Merge [label="Pass"]
    CI -> Repair [label="Fail"]
    Repair -> Workers
}
```

## ðŸ“Š Live Factory Status (Experimental)

This section demonstrates the Power of Quarto: reading the actual `.jules/tracker.json` (if it exists) to show real-time progress.

::: callout-tip
### How it works

The following block uses Python to parse the project state and render a progress summary directly into this document.
:::

``` python
import json
import os

tracker_path = ".jules/tracker.json"
if os.path.exists(tracker_path):
    with open(tracker_path, 'r', encoding='utf-8') as f:
        data = json.load(f)
    print(f"**Current Phase:** {data.get('current_phase', 'N/A')}")
    # Additional logic to render progress bars can go here
else:
    print("> âš ï¸ No active tracker found. Factory is currently idle.")
```

## ðŸ› ï¸ Role Definitions

### 1. [Factory Orchestrator](../skills/factory-orchestrator/SKILL.md)

The central navigator. Manages state transitions and input/output flow between components.

### 2. [Requirements Analyst](../skills/requirements-analyst/SKILL.md)

Specializes in intent classification (`Create`, `Continue`, `Maintain`) and baseline requirement gathering.

### 3. [Visual Designer](../skills/visual-designer/SKILL.md)

**Optional.** Activated only for UI-heavy payloads. Generates Design Tokens and Layout specs.

### 4. [Architect Reviewer](../skills/architect-reviewer/SKILL.md)

Handles ADR generation and defensive simulation.

### 5. [Factory Iterator](../skills/factory-iterator/SKILL.md)

Generates the `tracker.json` and micro-task specs for workers.

------------------------------------------------------------------------

> \[!TIP\] **Literate Strategy**: By using `.qmd`, we ensure that the documentation evolves with the code. If a new skill is added, it must be registered in this blueprint to be visible to the Orchestrator.