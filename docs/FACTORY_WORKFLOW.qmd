---
title: "ðŸ­ Factory Workflow Blueprint"
subtitle: "The Literate State Machine of Software Production"
---

# ðŸ­ Autonomous Software Factory Workflow

> [!NOTE] This is an **Executable Document**. It not only describes the workflow but also serves as the real-time monitoring interface for the factory.

## ðŸ—ï¸ Core Architecture: Decoupling & Orchestration

The factory is composed of five specialized autonomous components orchestrated by a central brain. 

### ðŸ—ºï¸ æˆ°ç•¥å…¨æ™¯ï¼šè»Ÿé«”å·¥å» ç”Ÿå‘½é€±æœŸ
> æ—¨åœ¨å‘ˆç¾ Phase é–“çš„é«˜éšŽå”ä½œèˆ‡ç‹€æ…‹è½‰ç§»ã€‚

```{mermaid}
graph LR
    User([ðŸ‘©â€ðŸ’» äººé¡žæ„åœ–]) --> P1[[Phase 1: Discovery]]
    P1 --> P2[[Phase 2: Tech Design]]
    P2 --> P3[[Phase 3: Execution]]
    P3 --> P4[[Phase 4: Validation]]
    P4 -- "åé¥‹/ç¶­ä¿®" --> P3
    P4 -- "å®Œæˆ" --> Done((ðŸš€ ç™¼å¸ƒ))
    
    style P1 fill:#e3f2fd,stroke:#1565c0,color:#0d47a1
    style P2 fill:#fffde7,stroke:#fbc02d,color:#f57f17
    style P3 fill:#f3e5f5,stroke:#7b1fa2,color:#4a148c
    style P4 fill:#ffebee,stroke:#c62828,color:#b71c1c
```

---

## ðŸ“Š Live Factory Status (Experimental)

```{mermaid}
graph TD
    PR[Pull Request] --> CI{CI é–€æˆ¶æª¢æ¸¬}
    CI -- é€šéŽ --> Merge[åˆä½µèˆ‡å‰é€²]
    CI -- å¤±æ•— --> Repair[è‡ªæˆ‘ä¿®å¾©è·¯å¾‘]
    Repair --> Worker[é‡å›ž Phase 3 åŸ·è¡Œå±¤]
    
    style Merge fill:#c8e6c9,stroke:#2e7d32
    style Repair fill:#ffccbc,stroke:#d84315
```

::: callout-tip
### é€²åº¦è‡ªå‹•åŒ–ç›£æŽ§
ä»¥ä¸‹å€å¡Šæœƒè‡ªå‹•æœå°‹å°ˆæ¡ˆä¸­çš„ `tracker.json` ä¸¦å‘ˆç¾åœ¨åœ°é€²åº¦ã€‚
:::

``` python
import json
import os
import glob

tracker_files = glob.glob(".*/tracker.json")
if tracker_files:
    tracker_path = tracker_files[0]
    with open(tracker_path, 'r', encoding='utf-8') as f:
        data = json.load(f)
    print(f"**Current Phase:** {data.get('current_phase', 'N/A')}")
else:
    print("> âš ï¸ No active tracker found. Factory is currently idle.")
```

---

## ðŸ” æˆ°è¡“ç´°ç¯€èˆ‡è§’è‰²å®šç¾©

### 1. [Discovery: æ„åœ–å…·ç¾åŒ–](../skills/requirements-analyst/SKILL.md)
> å°‡æ¨¡ç³Šçš„è‡ªç„¶èªžè¨€è½‰åŒ–ç‚ºå¯åŸ·è¡Œçš„è¦–è¦ºèˆ‡åŠŸèƒ½éœ€æ±‚ã€‚

```{mermaid}
graph TD
    Start([äººé¡žè¼¸å…¥]) --> Orch{å”ä½œç·¨ç¨‹å™¨}
    Orch --> ReqA[éœ€æ±‚åˆ†æžå¸«]
    ReqA --> UI_Check{éœ€è¦ UI?}
    UI_Check -- æ˜¯ --> VisD[è¦–è¦ºè¨­è¨ˆå¸«]
    UI_Check -- å¦ --> Arch[æž¶æ§‹å¯©æŸ¥]
    VisD --> Arch
    
    subgraph SG1 ["é‚Šç•Œï¼šæ„åœ–å°é½Š"]
        ReqA
        VisD
    end
    style SG1 fill:#ffffff,stroke:#333,stroke-dasharray: 5 5
```

### 2. [Tech Design: æŠ€è¡“å»ºæ¨¡](../skills/architect-reviewer/SKILL.md)
> ç¢ºä¿æž¶æ§‹å…§èšã€å»ºç«‹ ADR ä¸¦é€²è¡Œå¤§æ¨¡åž‹è…¦åŠ›æ¨¡æ“¬ã€‚

```{mermaid}
graph TD
    In[éœ€æ±‚è—åœ–] --> Arch[æž¶æ§‹å¯©æŸ¥å“¡]
    Arch --> Sim[å¤§æ¨¡åž‹è…¦åŠ›æ¨¡æ“¬]
    Sim -- é¢¨éšªè©•ä¼° --> Sim
    Sim -- ç°½ç½²é€šéŽ --> Out([æŠ€è¡“æ±ºç­–æª”])
    
    style Sim fill:#fff9c4,stroke:#fbc02d
```

### 3. [Execution: å·¥å» è¿­ä»£](../skills/factory-iterator/SKILL.md)
> åŽŸå­åŒ–è™•ç†ä»£ç¢¼è®Šå‹•ï¼Œä¸¦é€éŽ `tracker.json` ä¿æŒç‹€æ…‹è¿½è¹¤ã€‚

```{mermaid}
graph TD
    Dec[æŠ€è¡“æ±ºç­–] --> Iter[å·¥å» è¿­ä»£å™¨]
    Iter --> Track[(tracker.json)]
    Track --> Worker[åŸ·è¡Œå·¥äºº Agents]
    Worker -- æäº¤ PR --> CI[CI é–€æˆ¶]
    
    style Track fill:#f5f5f5,stroke:#9e9e9e
    style Worker fill:#e1f5fe,stroke:#01579b
```

---

> [!TIP] **Literate Strategy**: By using `.qmd`, we ensure that the documentation evolves with the code. If a new skill is added, it must be registered in this blueprint to be visible to the Orchestrator.