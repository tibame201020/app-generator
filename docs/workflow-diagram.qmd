---
title: "ğŸ”„ Factory Workflow Diagram"
subtitle: "Full-scale Architecture & Decision Logic"
format:
  html:
    page-layout: full
---

:::: column-screen-inset
::: {#workflow-diagram style="text-align: center;"}
```{dot}
//| fig-width: 100%
//| fig-format: svg
digraph G {
    graph [
        rankdir=LR,          // æ©«å‘ä½ˆå±€
        nodesep=0.4,
        ranksep=0.6,
        splines=polyline, 
        pad=0.2,
        bgcolor="transparent",
        dpi=150,           // é™ä½ DPI é¿å…åŸºæº–åœ–éå¤§
        center=true
    ]
    
    fontname="Arial"
    fontsize=20
    label="Autonomous Software Factory Workflow"
    labelloc="t"

    node [
        fontname="Arial", 
        shape=box, 
        style="filled,rounded", 
        fillcolor="#f9f9f9", 
        color="#333333",
        fontsize=12,
        margin=0.15
    ]
    
    edge [
        fontname="Arial", 
        color="#666666",
        fontsize=12,
        penwidth=1.5
    ]

    User [shape=circle, label="ğŸ‘©â€ğŸ’» Human", fillcolor="#e1f5fe", width=1.5]
    
    subgraph cluster_0 {
        label = "Phase 1: Discovery";
        color = "#e8f5e9";
        style = "filled,dashed";
        fillcolor = "#f1f8e9";
        margin = 20;
        
        Orchestrator [label="ğŸ Factory Orchestrator", fillcolor="#fff9c4"]
        ReqAnalyst [label="ğŸ“ Requirements Analyst"]
        VisualDesigner [label="ğŸ¨ Visual Designer", style="filled,dashed,rounded", fillcolor="#ffffff"]
        
        Decision_UI [shape=diamond, label="Needs UI?", fillcolor="#ffffff", width=1.8, height=1.2]
    }
    
    subgraph cluster_1 {
        label = "Phase 2: Tech Design";
        color = "#fff3e0";
        style = "filled,dashed";
        fillcolor = "#fff8e1";
        margin = 20;
        
        Architect [label="ğŸ›ï¸ Architect Reviewer"]
        Simulation [label="ğŸ§  Mental Simulation", shape=ellipse, fillcolor="#ffffff"]
    }
    
    subgraph cluster_2 {
        label = "Phase 3: Execution";
        color = "#f3e5f5";
        style = "filled,dashed";
        fillcolor = "#f3e5f5";
        margin = 20;
        
        Iterator [label="ğŸ­ Factory Iterator"]
        Tracker [label="ğŸ—„ï¸ tracker.json", shape=note, fillcolor="#ffffff"]
        Workers [label="ğŸ‘· Worker Agents"]
    }

    subgraph cluster_3 {
        label = "Phase 4: Validation";
        color = "#ffebee";
        style = "filled,dashed";
        fillcolor = "#fffde7";
        margin = 20;

        CI [label="ğŸ¤– CI Checker\n(Gatekeeper)", shape=diamond, fillcolor="#ffffff", width=2.0, height=1.2]
        Repair [label="ğŸ©¹ Self-Healing", fillcolor="#ffccbc"]
        Merge [label="âœ… Merge & Advance", fillcolor="#c8e6c9"]
    }

    // Connections
    User -> Orchestrator
    Orchestrator -> ReqAnalyst
    ReqAnalyst -> Decision_UI
    
    Decision_UI -> VisualDesigner [label=" Yes"]
    Decision_UI -> Architect [label=" No"]
    
    VisualDesigner -> Architect
    Architect -> Simulation
    Simulation -> Iterator
    
    Iterator -> Tracker
    Tracker -> Workers
    
    Workers -> CI [label=" PR Submitted"]
    
    CI -> Merge [label=" Pass"]
    CI -> Repair [label=" Fail"]
    Repair -> Workers [constraint=false, color="#e57373", tailport=w, headport=w]
}
```
:::
::::

[â¬…ï¸ è¿”å›å·¥ä½œæµèªªæ˜](FACTORY_WORKFLOW.qmd)